/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/js/app.js":
/*!***********************!*\
  !*** ./src/js/app.js ***!
  \***********************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\nconst gameNode = document.getElementById(\"game\"),\r\n    containerNode = document.getElementById(\"fifteen\"),\r\n    itemNodes = Array.from(containerNode.querySelectorAll(\".item\")),\r\n    countItems = 16;\r\nif (16 !== itemNodes.length) throw new Error(`Должно быть ровно ${countItems} items in HTML`);\r\nitemNodes[countItems - 1].style.display = \"none\";\r\nlet matrix = getMatrix(itemNodes.map(e => Number(e.dataset.matrixId)));\r\nsetPositionItems(matrix);\r\nconst maxShuffles = 50,\r\n    shuffleClass = \"gameShuffle\";\r\ndocument.getElementById(\"shuffle\").addEventListener(\"click\", () => {\r\n    let e, t = 0;\r\n    clearInterval(e), gameNode.classList.add(shuffleClass), e = setInterval(() => {\r\n        randomSwap(matrix), setPositionItems(matrix), t += 1, t >= maxShuffles && (t = 0, clearInterval(e), gameNode.classList.remove(shuffleClass))\r\n    }, 70)\r\n});\r\nlet blockedCoords = null;\r\n\r\nfunction randomSwap(e) {\r\n    var t = findCoordinatesByNumber(blankNumber, e),\r\n        r = validCoords(e, blockedCoords);\r\n    swap(t, r[Math.floor(Math.random() * r.length)], e), blockedCoords = t\r\n}\r\nconst blankNumber = 16;\r\n\r\nfunction getMatrix(t) {\r\n    const r = [\r\n        [],\r\n        [],\r\n        [],\r\n        []\r\n    ];\r\n    let n = 0,\r\n        o = 0;\r\n    for (let e = 0; e < t.length; e++) 4 <= o && (n++, o = 0), r[n][o] = t[e], o++;\r\n    return r\r\n}\r\n\r\nfunction setPositionItems(r) {\r\n    for (let t = 0; t < r.length; t++)\r\n        for (let e = 0; e < r[t].length; e++) {\r\n            var n = r[t][e];\r\n            setNodeStyles(itemNodes[n - 1], e, t)\r\n        }\r\n}\r\n\r\nfunction setNodeStyles(e, t, r) {\r\n    e.style.transform = `translate3D(${100*t}%, ${100*r}%, 0)`\r\n}\r\n\r\nfunction shuffleArray(e) {\r\n    return e.map(e => ({\r\n        value: e,\r\n        sort: Math.random()\r\n    })).sort((e, t) => e.sort - t.sort).map(({\r\n        value: e\r\n    }) => e)\r\n}\r\n\r\nfunction validCoords(r, n) {\r\n    var o = findCoordinatesByNumber(blankNumber, r);\r\n    const a = [];\r\n    for (let t = 0; t < r.length; t++)\r\n        for (let e = 0; e < r[t].length; e++) isValidForSwap(o, {\r\n            x: e,\r\n            y: t\r\n        }) && (n && n.x === e && n.y === t || a.push({\r\n            x: e,\r\n            y: t\r\n        }));\r\n    return a\r\n}\r\n\r\nfunction findCoordinatesByNumber(r, n) {\r\n    for (let t = 0; t < n.length; t++)\r\n        for (let e = 0; e < n[t].length; e++)\r\n            if (n[t][e] === r) return {\r\n                x: e,\r\n                y: t\r\n            };\r\n    return null\r\n}\r\n\r\nfunction isValidForSwap(e, t) {\r\n    var r = Math.abs(e.x - t.x),\r\n        n = Math.abs(e.y - t.y);\r\n    return !(1 !== r && 1 !== n || e.x !== t.x && e.y !== t.y)\r\n}\r\n\r\nfunction swap(e, t, r) {\r\n    var n = r[e.y][e.x];\r\n    r[e.y][e.x] = r[t.y][t.x], r[t.y][t.x] = n, isWon(r) && addWonClass()\r\n}\r\ncontainerNode.addEventListener(\"click\", e => {\r\n    var t = e.target.closest(\"button\");\r\n    !t || isValidForSwap(e = findCoordinatesByNumber(Number(t.dataset.matrixId), matrix), t = findCoordinatesByNumber(blankNumber, matrix)) && (swap(t, e, matrix), setPositionItems(matrix))\r\n}), window.addEventListener(\"keydown\", e => {\r\n    if (e.key.includes(\"Arrow\")) {\r\n        var t = findCoordinatesByNumber(blankNumber, matrix);\r\n        const n = {\r\n            x: t.x,\r\n            y: t.y\r\n        };\r\n        var r = e.key.split(\"Arrow\")[1].toLowerCase(),\r\n            e = matrix.length;\r\n        switch (r) {\r\n            case \"up\":\r\n                n.y += 1;\r\n                break;\r\n            case \"down\":\r\n                --n.y;\r\n                break;\r\n            case \"left\":\r\n                n.x += 1;\r\n                break;\r\n            case \"right\":\r\n                --n.x\r\n        }\r\n        n.y >= e || n.y < 0 || n.x >= e || n.x < 0 || (swap(t, n, matrix), setPositionItems(matrix))\r\n    }\r\n});\r\nconst winFlatArr = new Array(16).fill(0).map((e, t) => t + 1);\r\n\r\nfunction isWon(e) {\r\n    var t = e.flat();\r\n    for (let e = 0; e < winFlatArr.length; e++)\r\n        if (t[e] !== winFlatArr[e]) return !1;\r\n    return !0\r\n}\r\nconst wonClass = \"fifteenWon\";\r\n\r\nfunction addWonClass() {\r\n    setTimeout(() => {\r\n        containerNode.classList.add(wonClass), setTimeout(() => {\r\n            containerNode.classList.remove(wonClass)\r\n        }, 1e3)\r\n    }, 200)\r\n}\n\n//# sourceURL=webpack://gulp-lite/./src/js/app.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The require scope
/******/ 	var __webpack_require__ = {};
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./src/js/app.js"](0, __webpack_exports__, __webpack_require__);
/******/ 	
/******/ })()
;